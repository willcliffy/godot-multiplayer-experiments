syntax = "proto3";
package game;
option go_package = "./proto";

message Location {
  uint32 x = 1;
  uint32 z = 2;
}

message JoinGameResponse {
  uint64 playerId = 1;
  string color = 2;
  Location spawn = 3;

  repeated JoinGameResponse others = 4;
}

enum ActionType {
  ACTION_PING = 0;
  ACTION_CONNECT = 1;
  ACTION_DISCONNECT = 2;
  ACTION_MOVE = 3;
  ACTION_ATTACK = 4;
}

message Action {
  ActionType type = 1;
  bytes payload = 2;
}

message Disconnect { uint64 playerId = 1; }

message Move {
  uint64 playerId = 1;
  Location target = 2;
}

message Attack {
  uint64 sourcePlayerId = 1;
  uint64 targetPlayerId = 2;
}

message Damage {
  uint64 sourcePlayerId = 1;
  uint64 targetPlayerId = 2;
  int32 damageDealt = 3;
}

message GameTick {
  uint32 tick = 1;
  repeated Disconnect disconnects = 3;
  repeated Move moves = 4;
  repeated Attack attacks = 5;
}
